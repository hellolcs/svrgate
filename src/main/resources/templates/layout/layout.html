<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      th:with="currentUri=${currentUri}">
<head>
  <meta charset="UTF-8">
  <title layout:title-pattern="$CONTENT_TITLE | SVR GATE">SVR GATE</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap.min.css}">
  <link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap-icons.min.css}">
  <!-- Custom CSS -->
  <link rel="stylesheet" th:href="@{/css/layout.css}">
  <link rel="stylesheet" th:href="@{/css/style.css}">
  <link rel="stylesheet" th:href="@{/css/table.css}">
  <style>
    /* 추가: topbar 서브메뉴 버튼 hover 효과 (CSS로 지정) */
    #topbar .sub-menu .btn:hover {
      background-color: white !important;
      color: #002555 !important;
      border-color: white !important;
    }
  </style>
</head>
<body>
<script th:src="@{/bootstrap/js/bootstrap.bundle.min.js}"></script>
<!-- 상단바 -->
<header id="topbar">
  <!-- 로고 영역 -->
  <div class="logo-area">
    <a th:href="@{/dashboard}" style="display: block;">
      <img th:src="@{/img/logo_nicednb_white.png}" alt="LOGO"/>
    </a>
  </div>
  <!-- 서브메뉴 영역: 오직 설정 메뉴에만 표시 -->
  <div class="sub-menu" th:if="${currentUri != null and currentUri.startsWith('/system')}">
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-outline-light btn-sm" onclick="location.href='/system/user'">계정관리</button>
      <button type="button" class="btn btn-outline-light btn-sm" onclick="location.href='/system/setting'">시스템 설정</button>
    </div>
  </div>
  <!-- 우측 버튼 영역 -->
  <div class="topbar-links">
    <button type="button" class="btn btn-outline-light btn-sm rounded-pill" id="personal-setting-btn" style="font-weight: bold;" onclick="location.href='/account/personal'">
      개인설정
    </button>
    <button type="button" class="btn btn-outline-light btn-sm rounded-pill" onclick="location.href='/account/logout'" style="font-weight: bold;">
      로그아웃
    </button>
  </div>
</header>

<!-- 사이드바 -->
<nav id="sidebar">
  <ul class="nav flex-column">
    <li class="nav-item mb-2">
      <a class="nav-link rounded-0" th:href="@{/dashboard}"
         th:classappend="${currentUri != null and currentUri.startsWith('/dashboard') ? ' active' : ''}">
        <i class="bi bi-speedometer2 me-2"></i> 대시보드
      </a>
    </li>
    <li class="nav-item mb-2">
      <a class="nav-link rounded-0" th:href="@{/rule}"
         th:classappend="${currentUri != null and currentUri.startsWith('/rule') ? ' active' : ''}">
        <i class="bi bi-shield-check me-2"></i> 정책관리
      </a>
    </li>
    <li class="nav-item mb-2">
      <a class="nav-link rounded-0" th:href="@{/object}"
         th:classappend="${currentUri != null and currentUri.startsWith('/object') ? ' active' : ''}">
        <i class="bi bi-box-seam me-2"></i> 객체관리
      </a>
    </li>
    <li class="nav-item mb-2">
      <a class="nav-link rounded-0" th:href="@{/system/user}"
         th:classappend="${currentUri != null and currentUri.startsWith('/system') ? ' active' : ''}">
        <i class="bi bi-gear me-2"></i> 설정
      </a>
    </li>
    <li class="nav-item mb-2">
      <a class="nav-link rounded-0" th:href="@{/logs}"
         th:classappend="${currentUri != null and currentUri.startsWith('/logs') ? ' active' : ''}">
        <i class="bi bi-journal-code me-2"></i> LOG
      </a>
    </li>
  </ul>
</nav>

<!-- 메인 콘텐츠 영역 -->
<section id="content" layout:fragment="content">
  <!-- 각 페이지별 콘텐츠가 이 영역에 삽입됩니다 -->
</section>

<!-- Bootstrap JS -->
<script th:src="@{/bootstrap/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
